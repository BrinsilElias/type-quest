---
import fs from 'node:fs';

import Layout from '../layouts/Layout.astro';
import Shortcuts from '../components/Shortcuts.astro';
import InputField from '../components/InputField.astro';
import TestSettings from '../components/TestSettings.astro';

import Github from '../assets/github.svg';
import Palette from '../assets/palette.svg';
import Version from '../assets/version.svg';

const packageJson = fs.readFileSync('package.json', 'utf8');
const { version } = JSON.parse(packageJson);
---

<style>
  h1 {
    margin-top: var(--space-m-l);
  }
  .timer {
    font-family: var(--font-family-secondary);
    font-weight: var(--font-weight-6);
    font-size: var(--font-fluid-md);
    color: var(--accent-color);
  }
  .text-field {
    position: relative;
    color: var(--fg-color-light);
    font-family: var(--font-family-secondary);
    font-weight: var(--font-weight-5);
    font-size: var(--font-fluid-lg);
    height: 3lh;
    overflow: hidden;

    &::before {
      content: '';
      display: block;
      position: absolute;
      width: 0.1em;
      height: 2rem;
      top: 8px;
      background-color: var(--accent-color);
      animation: caretFlashSmooth 1s infinite;
    }
  }
  footer {
    margin-top: auto;
    font-size: var(--font-fluid-xsm);
    .cluster {
      margin-bottom: var(--space-xs);
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 0;
      a {
        display: flex;
        align-items: center;
        gap: var(--space-3xs);
        color: var(--clr-neutral-600);
        font-weight: var(--font-weight-5);
        text-decoration: none;
      }
    }
  }
</style>

<Layout title="TypeQuest">
  <header>
    <h1 class="text-center">Type Quest</h1>
  </header>
  <main>
    <section class="region flow wrapper" style="--_region-space: 2rem;">
      <TestSettings />
      <p class="timer | word-count">00:15</p>
      <section class="text-field"></section>
      <InputField />
    </section>
  </main>
  <footer>
    <div class="cluster" style="--_justify-content: center; --_gutter: 1rem">
      <Shortcuts key="Ctrl + T" label="Change Theme" />
      <Shortcuts key="Ctrl + R" label="Restart Test" />
    </div>
    <ul class="cluster" style="--_justify-content: center; --_gutter: 2rem">
      <li>
        <a href="https://github.com/BrinsilElias/type-quest"
          ><Github style="stroke: var(--clr-neutral-600)" />Github</a
        >
      </li>
      <li>
        <a href="#"
          ><Palette style="stroke: var(--clr-neutral-600)" />Light Theme</a
        >
      </li>
      <li>
        <a href="#"
          ><Version style="stroke: var(--clr-neutral-600)" />v{version}</a
        >
      </li>
    </ul>
  </footer>
</Layout>
