---
import Layout from '../layouts/Layout.astro';
import Footer from '../components/Footer.astro';
import InputField from '../components/InputField.astro';
import TestSettings from '../components/TestSettings.astro';
import ThemeSelector from '../components/ThemeSelector.astro';

import Logo from '../assets/logo.svg';
---

<style>
  header {
    padding-block: var(--space-m);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-xs);
  }
  section {
    overflow: hidden;
  }
  .text-field {
    position: relative;
    column-gap: 0.5ch;
    row-gap: 0;
    color: var(--fg-color-light);
    font-family: var(--font-family-secondary);
    font-weight: var(--font-weight-5);
    font-size: var(--font-fluid-lg);
    height: 3lh;
    overflow: hidden;
    text-wrap: pretty;

    .letter.active {
      --_right: 0;
      --_left: 0;
      --_caret-animation: caretFlashSmooth 1s infinite;
      position: relative;

      &::before {
        content: '';
        display: block;
        position: absolute;
        bottom: 0;
        right: var(--_right);
        left: var(--_left);
        width: 0.1em;
        height: 2rem;
        position: absolute;
        background-color: var(--accent-color);
        animation: var(--_caret-animation);
        transition: width 0.2s ease-in;
      }
    }
  }
</style>

<Layout title="TypeQuest">
  <ThemeSelector />
  <header>
    <Logo />
    <h1>Type Quest</h1>
  </header>
  <main>
    <section class="region flow wrapper" style="--_region-space: 2rem;">
      <TestSettings />
      <p class="typing-mode"><time datetime="0m 15s">00:15</time></p>
      <section class="text-field cluster"></section>
      <InputField />
    </section>
  </main>
  <Footer />
</Layout>

<script>
  const themeSelector = document.querySelector('dialog');
  const themeSwitch = $('.theme-switch');
  themeSwitch.on('click', function (e) {
    e.preventDefault();
    themeSelector?.showModal();
  });
</script>
